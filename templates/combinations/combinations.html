{% extends 'base/base.html' %}
{% load static %}
{% block extrahead %}
  <link rel="stylesheet" href="{% static 'combinations/css/combinations.css' %}" type="text/css">
{% endblock extrahead %}
{% block main %}
  <div class="container">
    <div class="row">
      <form method="post">
        {% csrf_token %}
        {{ form }}
        <input type="submit" value="Calculate">
        <button type="submit" name="reset" value="true">Reset</button>
      </form>
    </div>
    <div class="row">
      <h4>Combinations</h4>
      <div class="col-8">  <!-- combinations -->
        {% if combs == None %}
          Press "Calculate" to get combinations
        {% else %}
          {% for comb in combs %}
            <div class="card-group comb-group">
              {% for stamp in comb.stamps %}
                <div class="card comb-card h-100">
                  <img class="card-img-top" src="{{ stamp.sample.image }}" alt="..."/>
                  <div class="card-body">
                    <form method="post">
                      {% csrf_token %}
                      <div class="btn-group btn-group-sm w-100" role="group">
                        <button class="btn btn-success w-100" name="use_stamp" value="{{ stamp.id }}">Use</button>
                        <button class="btn btn-warning w-100" name="remove_stamp" value="{{ stamp.id }}">Remove</button>
                      </div>
                    </form>
                  </div>
                </div>
              {% endfor %}
              <div class="card comb-card h-100">
                <div class="card-body">
                  {{ comb.sum }}
                </div>
              </div>
            </div>
          {% empty %}
            No combinations found
          {% endfor %}
        {% endif %}
      </div>
      <div class="col-4">  <!-- desks -->
        <div class="container">
          <div class="row" id="stamps-on-postcard">  <!-- postcard -->
            <h4>On postcard</h4>
            <div class="card-group comb-group">
              {% for stamp in used_stamps %}
                <div class="card comb-card h-100">
                  <img class="card-img-top" src="{{ stamp.sample.image }}" alt="..."/>
                </div>
              {% endfor %}
            </div>
            <form action="{% url 'combinations:stick_stamps' %}" method="post">
              {% csrf_token %}
              <button class="btn btn-success w-100" type="submit">Stick to postcard</button>
            </form>
          </div>
          <div class="row" id="removed-stamps">  <!-- removed -->
            <h4>Removed</h4>
            <div class="card-group comb-group">
              {% for sample in removed_stamps %}
                <div class="card comb-card h-100">
                  <img class="card-img-top" src="{{ sample.image }}" alt="..."/>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock main %}
